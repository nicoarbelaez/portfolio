---
import { getCurrentLang, useTranslations } from "@/i18n/utils";
import Layout from "@/layouts/Layout.astro";
import type { CollectionEntry } from "astro:content";
import { getRelativeLocaleUrl } from "astro:i18n";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props as Props;
const lang = getCurrentLang(Astro.currentLocale);
const t = useTranslations(lang);

const { slug } = project;
const { title, description, tags, screenshot } = project.data;
const img = screenshot ? screenshot : `/img/projects/${slug}.webp`;
const { Content } = await project.render();
---

<Layout title={title} lang={lang}>
  <section class="max-w-3xl mx-auto px-6 py-12">
    <a
      href={getRelativeLocaleUrl(lang)}
      class="inline-flex items-center cursor-pointer px-4 py-2 mb-6 font-medium rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 shadow-md transition-transform transform hover:-translate-y-0.5">
      ‚Üê {t("action.back")}
    </a>

    {
      title && (
        <h1
          transition:name={`title-${slug}`}
          class="text-4xl md:text-5xl font-extrabold tracking-tight mb-4 prose prose-xl md:prose-2xl dark:prose-invert prose-headings:underline">
          {title}
        </h1>
      )
    }

    <img
      transition:name={`img-${slug}`}
      src={img}
      alt={`Screenshot of ${title} ${img}`}
      class="w-full h-auto rounded-xl mb-6 object-cover shadow-lg"
    />

    {
      description && (
        <p
          transition:name={`description-${slug}`}
          class="prose prose-base md:prose-lg lg:prose-xl dark:prose-invert prose-p:text-gray-700 dark:prose-p:text-gray-300 mb-6">
          {description}
        </p>
      )
    }

    {
      tags && (
        <ul class="flex flex-wrap gap-2 mb-8">
          {tags.map((tag) => (
            <li class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium">
              {tag}
            </li>
          ))}
        </ul>
      )
    }

    <article
      class="prose prose-lg md:prose-xl dark:prose-invert prose-img:rounded-xl prose-a:text-indigo-600 prose-a:hover:text-indigo-500">
      <Content />
    </article>
  </section>
</Layout>
