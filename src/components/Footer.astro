---
import { getCurrentLang, useTranslations } from '@/i18n/utils';
import FooterLink from '@/components/ui/FooterLink.astro';
import GradientDivider from '@/components/ui/GradientDivider.astro';

const lang = getCurrentLang(Astro.currentLocale);
const t = useTranslations(lang);

const links = [
  {
    href: 'https://astro.build',
    text: 'Astro',
    placeholder: '%astro%'
  },
  {
    href: 'https://vercel.com',
    text: 'Vercel',
    placeholder: '%vercel%'
  },
  {
    href: 'https://brittanychiang.com',
    text: 'brittanychiang.com',
    placeholder: '%inspiration1%'
  },
  {
    href: 'https://porfolio.dev',
    text: 'porfolio.dev',
    placeholder: '%inspiration2%'
  }
];

const parts = t('footer.text').split(/(%\w+%)/);
---

<div>
  <GradientDivider />
  <footer class="flex min-h-[100px] items-center justify-center px-4 py-14">
    <p class="mx-auto max-w-2xl text-center text-sm text-slate-500">
      {
        parts.map((part) => {
          const link = links.find((l) => l.placeholder === part);
          if (link) {
            return <FooterLink href={link.href} text={link.text} ariaLabel={link.text} />;
          }
          return part;
        })
      }
    </p>
  </footer>
</div>
